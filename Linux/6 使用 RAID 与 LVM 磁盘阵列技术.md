## 独立冗余磁盘阵列（RAID）
RAID 技术通过把多个硬盘设备组合成一个容量更大、安全性更好的磁盘阵列，并把数据切割成多个区段后分别存放在各个不同的物理硬盘设备上，利用分散读写技术来提升磁盘阵列整体的性能，同时把多个重要数据的副本同步到不同的物理硬盘设备上，起到了非常好的数据冗余备份效果。

RAID 技术对比：

|RAID级别|最少硬盘|可用容量|读写性能|安全性|特点|
|---|---|---|---|---|---|
|0|2|n|n|低|追求最大容量和速度，但任何一块硬盘损坏，数据将全部异常|
|1|2|n/2|n|高|追求最大安全性，只要阵列中有一块硬盘可用，数据就不受影响|
|5|3|n-1|n-1|中|在控制成本的前提下，追求硬盘的最大容量、速度及安全性，允许有一块硬盘出现异常，且数据不受影响|
|10|4|n/2|n/2|高|综合 RAID 1 和 RAID 0 的优点，追求硬盘的速度和安全性，允许有一半硬盘出现异常（不可发生在同一阵列中），且数据不受影响|

### RAID 0
RAID 0 技术将多块物理硬盘设备（至少两块）通过硬件或软件的方式串联在一起，组成一个大的卷组，并将数据依次写入各个物理硬盘中。在最理想的状态下，硬盘设备的读写性能会提升数倍，但若任意一块硬盘发生故障，将导致整个系统的数据都受到破坏。

### RAID 1
RAID 1 技术将两块以上的硬盘设备进行绑定，在写入数据时，是将数据同时写入到多块硬盘设备上（可以将其视为数据的镜像或备份）。当其中某一块硬盘发生故障后，一般会立即自动以热交换的方式来恢复数据的正常使用。
RAID 1 技术虽然十分注重数据的安全性，但是因为是在多块硬盘设备中写入了相同的数据，导致硬盘设备的利用率下降。

### RAID 5
RAID5 技术是将硬盘设备的数据奇偶校验信息保存到其他硬盘设备中。RAID 5磁盘阵列中数据的奇偶校验信息并不是单独保存到某一块硬盘设备中，而是存储到除自身以外的其他每一块硬盘设备上。
RAID 5 技术实际上没有备份硬盘中的真实数据信息，而是当硬盘设备出现问题后通过奇偶校验信息来尝试重建损坏的数据。
RAID 5 至少由3块硬盘组成，使用硬盘切割技术。当重复写入某个文件时，RAID 5 级别的磁盘阵列组只需要对应一个奇偶校验信息就可以，效率更高，存储成本也会随之降低。

### RAID 10
RAID 10技术需要至少4块硬盘来组建，其中先分别两两制作成 RAID 1 磁盘阵列，以保证数据的安 全性；然后再对两个 RAID 1 磁盘阵列实施 RAID 0 技术，进一步提高硬盘设备的读写速度。RAID 10 技术继承了 RAID 0 的高读写速度和 RAID 1 的数据安全性.

### 部署磁盘阵列
`mdadm 参数 硬盘名称`
用于创建、调整、监控和管理 RAID 设备。

参数：
- `-a` 检测设备名称，向RAID中添加新设备
- `-n` 指定设备数量
- `-l` 指定 RAID 级别
- `-C` 创建
- `-v` 显示过程
- `-f` 模拟设备损坏
- `-r` 移除设备
- `-Q` 查看摘要信息
- `-D` 查看详细信息
- `-S` 停止 RAID 磁盘阵列
- `-x` 设置初始RAID设备的备用成员数量 

例如，使用四块20G的硬盘创建 RAID 10 阵列：
```Shell
mdadm -Cv /dev/md0 -n 4 -l 10 /dev/sdb /dev/sdc /dev/sdd /dev/sde
```
初始化需要一定时间。在这之后，需要将制作好的磁盘阵列格式化并挂载。若需要重启系统后依然使用，需要将相关信息写入 /etc/fstab 文件中。

### 损坏磁盘阵列及修复
在确认有一块物理硬盘设备出现损坏而不能再继续正常使用后，应该使用 `mdadm` 命令将其移除：
```Shell
mdadm /dev/md0 -r /dev/sdb
```
当购买了新的硬盘设备后再使用 `mdadm` 命令予以替换即可，在此期间可以在 /RAID 目录中正常地创建或删除文件。
更换硬盘后再次使用 `-a` 参数进行添加操作，系统默认会自动开始数据的同步工作：
```Shell
mdadm /dev/md0 -a /dev/sdb
```

RAID 备份盘技术的核心理念是准备一块足够大的硬盘，这块硬盘平时处于闲置状态，一旦 RAID 磁盘阵列中有硬盘出现故障后则会马上自动顶替上去。

### 删除磁盘阵列
要删除 RAID 磁盘阵列，首先将卸载磁盘设备：
```Shell
umount /RAID
```
再将所有硬盘设置为停用状态并移除：
```Shell
mdadm /dev/md0 -f /dev/sdb -r /dev/sdb

mdadm /dev/md0 -f /dev/sdc -r /dev/sdc

mdadm /dev/md0 -f /dev/sdd -r /dev/sdd

mdadm /dev/md0 -f /dev/sde -r /dev/sde
```
最后停用整个 RAID 磁盘阵列：
```Shell
mdadm --stop /dev/md0
```
若磁盘文件仍有残留，可执行进一步删除：
```Shell
mdadm --remove /dev/md0
```
